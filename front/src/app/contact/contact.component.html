<div class="section">
  <h1>Contact us</h1>

  <!-- Show the form only if the message has not been sent -->
  <div *ngIf="!sent">
    <div [formGroup]="contactForm">

      <!-- First and last names inputs in the same row -->
      <div class="row">
        <div class="input-group">
          <label for="first-name">First name</label>
          <input id="first-name" formControlName="first_name" type="text" maxlength="30">
          <div class="validation-error" 
               *ngIf="contactForm.get('first_name')?.errors?.['required'] && 
                      (contactForm.get('first_name')?.touched || submitted)">
            ✖ First name is required
          </div>
        </div>

        <div class="input-group">
          <label for="last-name">Last name</label>
          <input id="last-name" formControlName="last_name" type="text" maxlength="30">
          <div class="validation-error" 
               *ngIf="contactForm.get('last_name')?.errors?.['required'] && 
                      (contactForm.get('last_name')?.touched || submitted)">
            ✖ Last name is required
          </div>
        </div>
      </div>

      <!-- Email input -->
      <div class="row">
        <div class="input-group">
          <label for="email">Email</label>
          <input formControlName="email" type="email" id="email" maxlength="100">
        </div>
        <div class="validation-error" 
             *ngIf="contactForm.get('email')?.errors?.['required'] && 
                    (contactForm.get('email')?.touched || submitted)">
          ✖ Email is required
        </div>
      </div>

      <!-- Topic input -->
      <div class="row">
        <div class="input-group">
          <label for="topic">Topic</label>
          <input formControlName="topic" type="text" id="topic" maxlength="50">
        </div>
        <div class="validation-error" 
             *ngIf="contactForm.get('topic')?.errors?.['required'] && 
                    (contactForm.get('topic')?.touched || submitted)">
          ✖ Topic is required
        </div>
      </div>

      <!-- Body input -->
      <div class="row">
        <div class="input-group">
          <label for="body">Body</label>
          <textarea formControlName="body" id="body" maxlength="500"></textarea>
        </div>
        <div class="validation-error" 
             *ngIf="contactForm.get('body')?.errors?.['required'] && 
                    (contactForm.get('body')?.touched || submitted)">
          ✖ Body is required
        </div>
      </div>

      <!-- Submit button -->
      <div class="input-group">
        <button class="submit-button"
                (click)="contactFormSubmit()"
                [disabled]="isLoading">
          {{ isLoading ? 'Sending...' : 'Send' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Show success message when the form is sent -->
  <div *ngIf="sent" class="success-message">
    <h2>Message sent!</h2>
    <p>Thank you for reaching out to us. We will get back to you shortly.</p>
  </div>
</div>
